<html>
<head>

<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="jquery-3.2.1.min.js"></script>
<style>
body {
    background-color: #FFFFFF;
    width: 100%;
    font-family: 'Roboto', sans-serif;
    height: 100%;
}

.widget {
    margin: 0 auto;
    width: 1020;
    height: 2500;
    margin-top:50px;
    background-color: #FFFFFF;
    border-radius: 5px;
    box-shadow: 0px 0px 1px 0px #06060d;

}

.header{
    background-color: #0099FF;
    height:40px;
    color:#FBFCFC;
    text-align: center;
    line-height: 40px;
    border-top-left-radius: 7px;
    border-top-right-radius: 7px;
    font-weight: 400;
    font-size: 1.5em;
    text-shadow: 1px 1px #A19532;
  text-transform: uppercase;
}


.chart-container{
    padding:25px;
}

.shadow {
    -webkit-filter: drop-shadow( 0px 3px 3px rgba(0,0,0,.5) );
    filter: drop-shadow( 0px 3px 3px rgba(0,0,0,.5) );
}
</style>
<style>
    h1, h2, h3, h4{ color: #0066FF; }
  </style>

</head>
<title>d3 project by mounira</title>
<body>
<div class="widget">
    <div class="header">Visualisation des livres informatique à la bibliothèque</div>
    <div id="chart" class="chart-container">
    <tr>
    <div align="center"><img src="logo unil.png"><br>
    <td><B>Projet Visualisation des données<B></td><br></div>
    <div align="Right"><td><B>Maître d'enseignement et de recherche: Mr Isaac Pante</B></td><br></div>
    <td align="left"><B><I>Réaliser par: ELmezrigui Mounira</td></I><B></td><br>
    </tr>
  <h3> I- Les differents type des livres informatiques</h3>
<svg width="1020" height="1060">
  <style type='text/css'>
  #c:hover{
    fill:#0033FF;
  }
  .sc:hover{
    fill:#0033FF;
  }
  </style>
  <circle align="center" id='c' cx="600" cy="600" r="120" fill="#0099FF" />
  <circle class='sc' cx="590" cy="790" r="70" fill="#0099FF" />
  <circle class='sc' cx="670" cy="880" r="40" fill="#0099FF" />
  <circle class='sc' cx="500" cy="860" r="40" fill="#0099FF" />
  <circle class='sc' cx="790" cy="580" r="70" fill="#0099FF"/>
  <circle class='sc' cx="400" cy="840" r="40" fill="#0099FF" />
  <circle class='sc' cx="680" cy="340" r="40" fill="#0099FF" />
  <circle class='sc' cx="330" cy="720" r="40" fill="#0099FF"/>
  <circle class='sc' cx="530" cy="300" r="40" fill="#0099FF"/>
  <circle class='sc' cx="450" cy="725" r="70" fill="#0099FF"/>
  <circle class='sc' cx="300" cy="630" r="40" fill="#0099FF" />
  <circle class='sc' cx="300" cy="530" r="40" fill="#0099FF" />
  <circle class='sc' cx="320" cy="440" r="40" fill="#0099FF"  />
  <circle class='sc' cx="410" cy="340" r="40" fill="#0099FF"  />
  <circle class='sc' cx="720" cy="450" r="70" fill="#0099FF"  />
  <circle class='sc' cx="210" cy="380" r="40" fill="#0099FF"  />
  <circle class='sc' cx="300" cy="240" r="40" fill="#0099FF"  />
  <circle class='sc' cx="445" cy="455" r="70" fill="#0099FF"  />
  <circle class='sc' cx="740" cy="730" r="70" fill="#0099FF"  />
  <circle class='sc' cx="410" cy="590" r="70" fill="#0099FF"  />
  <circle class='sc' cx="577" cy="410" r="70" fill="#0099FF"  />
    <circle class='sc' cx="200" cy="750" r="40" fill="#0099FF"  />
  <circle class='sc' cx="570" cy="900" r="40" fill="#0099FF"  />
  <circle class='sc' cx="320" cy="800" r="40" fill="#0099FF"  />
    <circle class='sc' cx="838" cy="780" r="40" fill="#0099FF"  />
  <circle class='sc' cx="840" cy="680" r="40" fill="#0099FF"  />
  <circle class='sc' cx="750" cy="850" r="40" fill="#0099FF"  />
  

</svg>


<script type='text/javascript'>
var jtext = [
 { "x": "52%", "y":"58%", "text-anchor":"middle", "stroke" : "#ffffff","ffamily":"time new roman", "fsize":"20","swidth":"2px","dy":".3em","text":"Livres Informatique" },
 { "x": "58%", "y":"74%", "tanchor":"middle", "stroke" : "#ffffff","ffamily":"time new roman", "fsize":"16","swidth":"2px","dy":".3em","text":"CSS" },
  { "x": "55%", "y":"85%", "tanchor":"middle", "stroke" : "#ffffff","ffamily":"time new roman", "fsize":"16","swidth":"2px","dy":".3em","text":"Css1" },
  { "x": "49%", "y":"81%", "tanchor":"middle", "stroke" : "#ffffff","ffamily":"time new roman", "fsize":"16","swidth":"2px","dy":".3em","text":"Css2" },
  { "x": "65%", "y":"83%", "tanchor":"middle", "stroke" : "#ffffff","ffamily":"time new roman", "fsize":"16","swidth":"2px","dy":".3em","text":"Css3" },
  { "x": "78%", "y":"55%", "tanchor":"middle", "stroke" : "#ffffff","ffamily":"time new roman", "fsize":"16","swidth":"2px","dy":".3em","text":"Algorithme" },
   { "x": "39%", "y":"42%", "text-anchor":"middle", "stroke" : "#ffffff","ffamily":"time new roman", "fsize":"14","swidth":"2px","dy":".3em","text":"Conception" },
   { "x": "70%", "y":"42%", "text-anchor":"middle", "stroke" : "#ffffff","ffamily":"time new roman", "fsize":"14","swidth":"2px","dy":".3em","text":"Javascript" },
 { "x": "54%", "y":"38%", "text-anchor":"middle", "stroke" : "#ffffff","ffamily":"time new roman", "fsize":"14","swidth":"2px","dy":".3em","text":"PHP " },
 { "x": "85%", "y":"60%", "tanchor":"middle", "stroke" : "#ffffff","ffamily":"time new roman", "fsize":"14","swidth":"2px","dy":".3em","text":"C " },
 { "x": "37%", "y":"55%", "text-anchor":"middle", "stroke" : "#ffffff","ffamily":"time new roman", "fsize":"14","swidth":"2px","dy":".3em","text":"Python " },
   { "x": "39%", "y":"67%", "text-anchor":"middle", "stroke" : "#ffffff","ffamily":"time new roman", "fsize":"14","swidth":"2px","dy":".3em","text":"HTML" },
  { "x": "72%", "y":"70%", "text-anchor":"middle", "stroke" : "#ffffff","ffamily":"time new roman", "fsize":"14","swidth":"2px","dy":".3em","text":" BD" },
  { "x": "19%", "y":"38%", "text-anchor":"middle", "stroke" : "#ffffff","ffamily":"time new roman", "fsize":"14","swidth":"2px","dy":".3em","text":"UML" },
  { "x": "28%", "y":"24%", "text-anchor":"middle", "stroke" : "#ffffff","ffamily":"time new roman", "fsize":"14","swidth":"2px","dy":".3em","text":"Merise" },
  { "x": "28%", "y":"24%", "text-anchor":"middle", "stroke" : "#ffffff","ffamily":"time new roman", "fsize":"14","swidth":"2px","dy":".3em","text":"PHP4" },
  { "x": "28%", "y":"24%", "text-anchor":"middle", "stroke" : "#ffffff","ffamily":"time new roman", "fsize":"14","swidth":"2px","dy":".3em","text":"PHP5" },


 
];
var svg = d3.select("body").select("div").select("svg");
svg.selectAll("text")
  .data(jtext)
  .enter()
  .append("text")
  .text(function(d) {
  return d.text;
  })
  .attr("x", function(d) {
    return d.x;
  })
  .attr("y", function(d) {
    return d.y;
  }) 
  .attr("text-anchor", function(d) {
    return d.tanchor;
  })
  .attr("stroke", function(d) {
    return d.stroke;
  })
  .attr("font-size", function(d) {
    return d.fsize;
  }) 
  .attr("stroke-width", function(d) {
    return d.swidth;
  }) 
  .attr("dy", function(d) {
    return d.dy;
  })
  .attr("class","tt");
</script>
<tr>
<td>
<h3> II- Les informations des livres informatiques</h3>
<style>
  
  .node {
    cursor: pointer;
  }

  .node circle {
    fill: #0099FF;
    stroke: #3498DB;
    stroke-width: 3px;
  }

  .node text {
    font: 14px sans-serif;
  }

  .link {
    fill: none;
    stroke: #85C1E9;
    stroke-width: 2px;
  }
  
</style>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

var treeData = [
  {
    "name": "Informations sur les livres informatique",
    "parent": "null",
    "children": [
      {
        "name": "Javascript",
        "parent": "Top Level",
        "children": [
          {
            "name": "Livre 1",
            "parent": "js1",
            "children": [
          {
            "name": "titre: Javascript Pour Les web designers",
            "parent": "js1"
          },
          {
            "name": "auteur: Lara Hogan",
            "parent": "js1"
          }
        ]
          },
          {
        "name": "livre 2",
        "parent": "js1",
        "children": [
          {
            "name": "titre: Découvrez le language Javascript",
            "parent": "js1"
          },
          {
            "name": "auteur: Johann Pardanaud et Sébastien de la Marck",
            "parent": "js1"
          }
        ]
      },
          {
            "name": "Livre 3",
            "parent": "Javascript",
            "children": [
          {
            "name": "titre: Javascript: the definitive guide",
            "parent": "js2"
          },
          {
            "name": "auteur: David Flanagan",
            "parent": "js2"
          }
        ]
          },
          {
            "name": "Livre 4",
            "parent": "Javascript",
            "children": [
          {
            "name": "titre: Professional Javascript for web developers",
            "parent": "js3"
          },
          {
            "name": "auteur: Nicholas C.Zakas",
            "parent": "js3"
          }
        ]
          }
        ]
      },

{
        "name": "PHP",
        "parent": "Top Level",
        "children": [
          {
            "name": "Livre 1",
            "parent": "php",
            "children": [
          {
            "name": "titre: PHP Security",
            "parent": "php1"
          },
          {
            "name": "auteur: Chris Shiflett",
            "parent": "php1"
          }
        ]
          },
          {
        "name": "livre 2",
        "parent": "php1",
        "children": [
          {
            "name": "titre: PHP Cookbook",
            "parent": "php1"
          },
          {
            "name": "auteur: David Sklar et Adam Trachtenberg",
            "parent": "php1"
          }
        ]
      },
          {
            "name": "livre 3",
            "parent": "php2",
            "children": [
          {
            "name": "titre: Learning PHP Data Objects",
            "parent": "php2"
          },
          {
            "name": "auteur: Dennis Popel",
            "parent": "php2"
          }
        ]
          },
          {
            "name": "livre 4",
            "parent": "php3",
           "children": [
          {
            "name": "titre: PHP 5 cours et exercices",
            "parent": "php2"
          },
          {
            "name": "auteur: Jean Engels",
            "parent": "php2"
          }
        ] 
          }
        ]
      },
      {
        "name": "Base de donnée",
        "parent": "Top Level",
        "children": [
          {
            "name": "Livre 1",
            "parent": "bd",
            "children": [
          {
            "name": "titre: Les bases de données NoSQL et le Big Data",
            "parent": "bd"
          },
          {
            "name": "auteur: Rudi Bruchez",
            "parent": "bd"
          }
        ]
          },
          {
        "name": "livre 2",
        "parent": "bd",
        "children": [
          {
            "name": "titre: SQL Pour Les Nulls",
            "parent": "bd"
          },
          {
            "name": "auteur: Allen G.Taylor",
            "parent": "bd"
          }
        ]
      },
          {
            "name": "livre 3",
            "parent": "bd",
            "children": [
          {
            "name": "titre: Administrez vos bases de données avec MySQL",
            "parent": "bd"
          },
          {
            "name": "auteur: Chantal Gribaumont",
            "parent": "bd"
          }
        ]
          },
          {
            "name": "livr3",
            "parent": "bd"
          }
        ]
      },
      
       
      {
        "name": "HTML",
        "parent": "Top Level"
      },
      {
        "name": "Sécurité réseau",
        "parent": "Top Level"
      }
    ]

  }
];


var margin = {top: 20, right: 120, bottom: 20, left: 120},
  width = 1000 - margin.right - margin.left,
  height = 800 - margin.top - margin.bottom;
  
var i = 0,
  duration = 750,
  root;

var tree = d3.layout.tree()
  .size([height, width]);

var diagonal = d3.svg.diagonal()
  .projection(function(d) { return [d.y, d.x]; });

var svg = d3.select("body").append("svg")
  .attr("width", width + margin.right + margin.left)
  .attr("height", height + margin.top + margin.bottom)
  .append("g")
  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

root = treeData[0];
root.x0 = height / 2;
root.y0 = 0;
  
update(root);

d3.select(self.frameElement).style("height", "700px");

function update(source) {

  var nodes = tree.nodes(root).reverse(),
    links = tree.links(nodes);

  nodes.forEach(function(d) { d.y = d.depth * 180; });

  var node = svg.selectAll("g.node")
    .data(nodes, function(d) { return d.id || (d.id = ++i); });

  var nodeEnter = node.enter().append("g")
    .attr("class", "node")
    .attr("transform", function(d) { return "translate(" + source.y0 + "," + source.x0 + ")"; })
    .on("click", click);

  nodeEnter.append("circle")
    .attr("r", 1e-6)
    .style("fill", function(d) { return d._children ? "Dodger Blue" : "0099FF"; });

  nodeEnter.append("text")
    .attr("x", function(d) { return d.children || d._children ? -13 : 13; })
    .attr("dy", ".35em")
    .attr("text-anchor", function(d) { return d.children || d._children ? "end" : "start"; })
    .text(function(d) { return d.name; })
    .style("fill-opacity", 1e-6);

  var nodeUpdate = node.transition()
    .duration(duration)
    .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; });

  nodeUpdate.select("circle")
    .attr("r", 10)
    .style("fill", function(d) { return d._children ? "Dodger Blue" : "0099FF"; });

  nodeUpdate.select("text")
    .style("fill-opacity", 1);

  var nodeExit = node.exit().transition()
    .duration(duration)
    .attr("transform", function(d) { return "translate(" + source.y + "," + source.x + ")"; })
    .remove();

  nodeExit.select("circle")
    .attr("r", 1e-6);

  nodeExit.select("text")
    .style("fill-opacity", 1e-6);

  var link = svg.selectAll("path.link")
    .data(links, function(d) { return d.target.id; });

  link.enter().insert("path", "g")
    .attr("class", "link")
    .attr("d", function(d) {
    var o = {x: source.x0, y: source.y0};
    return diagonal({source: o, target: o});
    });

  link.transition()
    .duration(duration)
    .attr("d", diagonal);

  link.exit().transition()
    .duration(duration)
    .attr("d", function(d) {
    var o = {x: source.x, y: source.y};
    return diagonal({source: o, target: o});
    })
    .remove();

  nodes.forEach(function(d) {
  d.x0 = d.x;
  d.y0 = d.y;
  });
}

function click(d) {
  if (d.children) {
  d._children = d.children;
  d.children = null;
  } else {
  d.children = d._children;
  d._children = null;
  }
  update(d);
}
</script>
</td>
</tr>
<br>
<h3>III- L'évolution des livres entre 2016 et 2017: </h3>
<br>
<tr>
<td>
<h4> 1 - Evolution des livres en 2016: </h4>
<script>
var dataset = [
  { name: 'Javascript', percent: 33 },
  { name: 'HTML', percent: 23},
  { name: 'CSS', percent: 13 },
  { name: 'PHP', percent: 7 },
  { name: 'Python', percent: 8 },
  { name: 'Algorithme', percent: 3},
  { name: 'Conception', percent: 6},
  { name: 'Réseau', percent: 2 },
  { name: 'Base de donnée', percent: 5 }
];
var pie=d3.layout.pie()
        .value(function(d){return d.percent})
        .sort(null)
        .padAngle(.03);
 
var w=400,h=500;
 
var outerRadius=w/2;
var innerRadius=100;
 
var color = d3.scale.category10();
 
var arc=d3.svg.arc()
        .outerRadius(outerRadius)
        .innerRadius(innerRadius);
 
var svg=d3.select("#chart")
        .append("svg")
        .attr({
            width:w,
            height:h,
            class:'shadow'
        }).append('g')
        .attr({
            transform:'translate('+w/2+','+h/2+')'
        });
var path=svg.selectAll('path')
        .data(pie(dataset))
        .enter()
        .append('path')
        .attr({
            d:arc,
            fill:function(d,i){
                return color(d.data.name);
            }
        });
        path.transition()
    .duration(1000)
    .attrTween('d', function(d) {
        var interpolate = d3.interpolate({startAngle: 0, endAngle: 0}, d);
        return function(t) {
            return arc(interpolate(t));
        };
    });
    var text=svg.selectAll('text')
  .data(pie(dataset))
  .enter()
  .append("text")
  .transition()
  .duration(200)
  .attr("transform", function (d) {
      return "translate(" + arc.centroid(d) + ")";
  })
  .attr("dy", ".4em")
  .attr("text-anchor", "middle")
  .text(function(d){
      return d.data.percent+"%";
  })
  .style({
      fill:'#fff',
      'font-size':'10px'
  });
  var legendRectSize=10;
var legendSpacing=6;
var legendHeight=legendRectSize+legendSpacing;
 
 
var legend=svg.selectAll('.legend')
  .data(color.domain())
  .enter()
  .append('g')
  .attr({
      class:'legend',
      transform:function(d,i){
          return 'translate(-35,' + ((i*legendHeight)-65) + ')';
      }
  });
  legend.append('rect')
  .attr({
      width:legendRectSize,
      height:legendRectSize,
      rx:20,
      ry:20
  })
  .style({
      fill:color,
      stroke:color
  });
 
legend.append('text')
  .attr({
      x:30,
      y:15
  })
  .text(function(d){
      return d;
  }).style({
      fill:'#929DAF',
      'font-size':'14px'
  });
</script>
</td>
<td>
</td>
<td>
<h4> 2- Evolution des livres en 2017: </h4>

<script>
var dataset = [
  { name: 'Javascript', percent: 37 },
  { name: 'HTML', percent: 25},
  { name: 'CSS', percent: 13 },
  { name: 'PHP', percent: 4 },
  { name: 'Python', percent: 3 },
  { name: 'Algorithme', percent: 3},
  { name: 'Conception', percent: 6},
  { name: 'Réseau', percent: 4 },
  { name: 'Base de donnée', percent: 5 }
];
var pie=d3.layout.pie()
        .value(function(d){return d.percent})
        .sort(null)
        .padAngle(.03);
 
var w=400,h=500;
 
var outerRadius=w/2;
var innerRadius=100;
 
var color = d3.scale.category10();
 
var arc=d3.svg.arc()
        .outerRadius(outerRadius)
        .innerRadius(innerRadius);
 
var svg=d3.select("#chart")
        .append("svg")
        .attr({
            width:w,
            height:h,
            class:'shadow'
        }).append('g')
        .attr({
            transform:'translate('+w/2+','+h/2+')'
        });
var path=svg.selectAll('path')
        .data(pie(dataset))
        .enter()
        .append('path')
        .attr({
            d:arc,
            fill:function(d,i){
                return color(d.data.name);
            }
        });
        path.transition()
    .duration(1000)
    .attrTween('d', function(d) {
        var interpolate = d3.interpolate({startAngle: 0, endAngle: 0}, d);
        return function(t) {
            return arc(interpolate(t));
        };
    });
    var text=svg.selectAll('text')
  .data(pie(dataset))
  .enter()
  .append("text")
  .transition()
  .duration(200)
  .attr("transform", function (d) {
      return "translate(" + arc.centroid(d) + ")";
  })
  .attr("dy", ".4em")
  .attr("text-anchor", "middle")
  .text(function(d){
      return d.data.percent+"%";
  })
  .style({
      fill:'#fff',
      'font-size':'10px'
  });
  var legendRectSize=10;
var legendSpacing=6;
var legendHeight=legendRectSize+legendSpacing;
 
 
var legend=svg.selectAll('.legend')
  .data(color.domain())
  .enter()
  .append('g')
  .attr({
      class:'legend',
      transform:function(d,i){
          return 'translate(-35,' + ((i*legendHeight)-65) + ')';
      }
  });
  legend.append('rect')
  .attr({
      width:legendRectSize,
      height:legendRectSize,
      rx:20,
      ry:20
  })
  .style({
      fill:color,
      stroke:color
  });
 
legend.append('text')
  .attr({
      x:30,
      y:15
  })
  .text(function(d){
      return d;
  }).style({
      fill:'#929DAF',
      'font-size':'14px'
  });
</script>
</td>
</tr>
</body>
</html>
